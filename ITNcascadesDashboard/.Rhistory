geom_col(aes(x=insecticide_name, y=mean, fill=insecticide_name, group=interaction( washed_status, EHT), alpha=washed_status), stat="identity", position=position_dodge())+
geom_errorbar(aes(x=insecticide_name, ymin=X2.5., ymax=X97.5., color=insecticide_name,  group=interaction( washed_status, EHT)),position=position_dodge(0.9), width=0.4)+
geom_segment(data=all_estimates_simple_mean%>% filter(insecticide_name =="Interceptor G2"),
aes(y = meanmean, yend=meanmean, x= 0.55, xend = 1.45, color=insecticide_name, linetype = washed_status), size = 0.9) +
geom_segment(data=all_estimates_simple_mean%>% filter(insecticide_name =="Olyset Plus"),
aes(y = meanmean, yend=meanmean, x= 1.55, xend = 2.45, color=insecticide_name, linetype = washed_status), size = 0.9) +
geom_segment(data=all_estimates_simple_mean%>% filter(insecticide_name =="Pyrethroid-only"),
aes(y = meanmean, yend=meanmean, x= 2.55, xend = 3.45, color=insecticide_name, linetype = washed_status), size = 0.9) +
facet_wrap( . ~param2, scales = "free_x", labeller = label_parsed)+
theme_bw()+#ylim(0,1)+
labs(x="", y="", color="", fill="", alpha="", linetype="")+
scale_alpha_manual(values=c(  0.7, 0.4),na.translate=FALSE)+
scale_color_manual(values=c("darkorange","dodgerblue","darkgrey" ))+
scale_fill_manual(values=c("darkorange","dodgerblue","darkgrey"))+
scale_y_continuous(breaks=c(0, 0.2, 0.4, 0.6, 0.8, 1))+
theme(legend.position = "bottom",
strip.text.x = element_text(size = 14),
axis.text=element_text(size=14), strip.background =element_rect(fill="white"), legend.text =element_text(size=14) )+
geom_text(aes(label=EHT_id, x=insecticide_name, y=label_height,group=EHT),
position = position_dodge(width=0.9),size=3.5)+#ylim(-0.05,1)+
guides(fill = "none",color = "none")
final_table=all_estimates_simple %>%
mutate(mean=round(mean, digits = 2),X2.5.=round(X2.5., digits = 2),X97.5.=round(X97.5., digits = 2))%>%
select(insecticide_name, EHT, EHT_id, param3, washed_status, mean, X2.5., X97.5.)%>%
rename(netType=insecticide_name, parameter=param3, q025=X2.5., q975=X97.5.)%>%
tidyr::pivot_wider(id_cols =c( netType, EHT, parameter), names_from = washed_status, values_from = c(mean, q025, q975) )%>%
mutate(halflife_insecticide=3/(1-mean_Washed/mean_Unwashed)
)
write.csv(final_table, file.path(scriptDir, "fitted_parameters_pyr.csv"), row.names = F)
final_table %>%
select(-halflife_insecticide)%>%
pivot_longer(cols = c("mean_Washed" , "mean_Unwashed","q025_Washed"   ,       "q025_Unwashed"
,"q975_Washed"    ,      "q975_Unwashed"))%>%
separate(name, into=c("param", "wash_status"))%>%
ungroup()%>%
pivot_wider(id_cols = c(wash_status, parameter, netType,EHT ), names_from = param, values_from = value)%>%
mutate(value=paste0(mean, " (", q025, "-", q975, ")"))%>%
select(-mean, -q025, -q975)%>%
pivot_wider(id_cols = c(parameter, netType,EHT ), names_from = wash_status, values_from = value)%>%
arrange(parameter, netType, EHT)%>%
select(parameter, netType, EHT, Unwashed, Washed)%>%
rename("Net type"=netType, "Washed 20x"=Washed)%>%
gt()
final_table %>%
select(-halflife_insecticide)%>%
pivot_longer(cols = c("mean_Washed" , "mean_Unwashed","q025_Washed"   ,       "q025_Unwashed"
,"q975_Washed"    ,      "q975_Unwashed"))%>%
separate(name, into=c("param", "wash_status"))%>%
ungroup()%>%
pivot_wider(id_cols = c(wash_status, parameter, netType,EHT ), names_from = param, values_from = value)%>%
mutate(value=paste0(mean, " (", q025, "-", q975, ")"))%>%
select(-mean, -q025, -q975)%>%
pivot_wider(id_cols = c(parameter, netType,EHT ), names_from = wash_status, values_from = value)%>%
arrange(parameter, netType, EHT)%>%
select(parameter, netType, EHT, Unwashed, Washed)%>%
rename("Net type"=netType, "Washed 20x"=Washed)%>%
gt()%>%
gt::gtsave(filename = file.path(plotDir, "outputs_ento_efficacy_all.docx"))
rm(list=ls())
library(dplyr)
library(ggplot2)
mainDir="/Users/chamcl/switchdrive/AIM//5. Collaborations/External/Pie & Sarah/EHT_Fitting/"
outputsDir=file.path(mainDir, "csv_outputs")
plotDir=file.path(mainDir, "../Write-up/Revision/plots")
all_ITNcov=data.frame()
optimise_decay_param=function(param, df_ITN_cov){
#if(param[3]<1){
out=data.frame(
time=df_ITN_cov%>% pull(time),
decay_obs=df_ITN_cov  %>% pull(ITNcov)
)%>%
mutate(decay=param[3]*exp( -(time/(param[1]))^param[2] * log(2) ),
diff=(decay-decay_obs)^2)%>%
summarise(diff=sum(diff))
# } else {
#   out=Inf
# }
return(out)
}
calculate_param=function(df_ITN_cov){
opti=optim(c(0.448, 1.11, 0.7), optimise_decay_param, df_ITN_cov=df_ITN_cov , method = "L-BFGS-B", lower=c(0, 0, 0), upper = c(Inf, Inf, 1) )$par
names(opti)=c("L", "k", "a")
opti$setting=unique(df_ITN_cov$setting)
return(opti)
}
calculate_param=function(df_ITN_cov){
opti=optim(c(0.448, 1.11, 0.7), optimise_decay_param, df_ITN_cov=df_ITN_cov , method = "L-BFGS-B", lower=c(0, 0, 0), upper = c(3, Inf, 1) )$par
names(opti)=c("L", "k", "a")
opti$setting=unique(df_ITN_cov$setting)
return(opti)
}
#######################################################
#' Table S1 of Protopopoff et al. 2018 https://www.thelancet.com/journals/lancet/article/PIIS0140-6736(18)30427-6/fulltext
#' Table S2 of Protopopoff et al. 2024 https://malariajournal.biomedcentral.com/articles/10.1186/s12936-023-04727-8#Sec12
#' # proportion of residents declaring using a study net the previous night
ITN_covtrial=data.frame(arm=c(rep("Pyrethroid",6),rep("PBO",6))
,time=rep(c(0.3, 0.75, 1.3, 1.75,2.3, 2.75),2)
,ITNcov=c(1915/2567,2012/2510,1818/2669,1610/2595, 1386/2614, 784/2289,
1997/2559,1820/2335,1571/2687,1445/2647, 1166/2459, 790/2513),
RCT="2018Protopopoff")
all_ITNcov=rbind(all_ITNcov, ITN_covtrial)
########################################################
## Use values not disagggregated by arm, but have similar trends (Supplemental file 2)
## Staedke 2020 page 1298
ITN_covtrial_1 = data.frame(time = c(.5,1,1.5)
,ITNcov = c(.85,.79,.73),
RCT="2020Staedke",
arm="Pyrethroid")
ITN_covtrial=rbind(ITN_covtrial_1, ITN_covtrial_1%>% mutate(arm="PBO"))
all_ITNcov=rbind(all_ITNcov, ITN_covtrial)
######################################################################################
#' Mosha 2022 https://www.thelancet.com/journals/lancet/article/PIIS0140-6736(21)02499-5/fulltext#sec1
#' Abtract, Findings
#' Mosha 2022 https://www.thelancet.com/journals/lancet/article/PIIS0140-6736(21)02499-5/fulltext#sec1
#' Appendix page 4, explicit dates in main paper page 1230
#' "Proportion of participants reporting using a net the night before"
ITN_covtrial_1=data.frame(arm=rep(c("Pyrethroid","Pyriproxyfen","IG2","PBO"),each=4),
time=rep(c(0.25,1,1.5,2),4),
ITNcov=c(868/1130,2848/4627,2606/4991,2488/5029,
764/1103,2646/4358,2124/4645,2087/5455,
752/1099,3157/4833,2676/5194,2585/5576,
771/1046,2506/4247,1885/4633,1534/5186)
)
# mosha 2024
#' Appendix S2 figure. Raw data not available. Only among selected children
ITN_covtrial_2=data.frame(arm=rep(c("Pyrethroid","Pyriproxyfen","IG2","PBO"),each=2),
time=rep(c(2.5,3),4),
ITNcov=c(0.33,0.25,
0.25,0.14,
0.29,0.21,
0.16,0.09)
)
ITN_covtrial=rbind(ITN_covtrial_1, ITN_covtrial_2)%>% mutate(RCT="2022Mosha")
all_ITNcov=rbind(all_ITNcov, ITN_covtrial)
######################################################################################
#' Accrombessi 2023
#' Accrombessi 2024 Appendix 2.1
#' "study net coverage"
ITN_covtrial=data.frame(arm=rep(c("Pyrethroid","Pyriproxyfen","IG2"),each=6),
time=rep(c(0.5,0.75, 1.5, 2, 2.5, 3),3),
ITNcov=c(2127/3461,1867/2422,2023/3182,1430/2307, 2031/3329, 1400/2430,
2055/3478,1730/2439,1777/2953,1162/2245, 1653/3236, 889/2257,
2287/3392,1935/2345,1951/2993,1440/2102, 1837/3204, 1278/2450),
RCT="2023Accrombessi"
) %>% filter(time!=0.5)
all_ITNcov=rbind(all_ITNcov, ITN_covtrial)
#########################################################################
#########################################################################
all_ITNcov$setting=paste0(all_ITNcov$RCT,"_" ,all_ITNcov$arm)
all_param=data.frame()
for(i in unique(all_ITNcov$setting)){
print(i)
all_param=rbind(all_param, calculate_param( df_ITN_cov =all_ITNcov %>% filter(setting==i)))
}
all_param=all_param%>%
mutate(setting2=setting)%>%
separate(setting2, into=c("RCT", "arm"))
write.csv(all_param, file.path(plotDir, "ITN_usage_fit.csv"), row.names = F)
##############
# Visualisation
curve_plot=expand.grid(list(time=seq(0, 3, 0.1),setting= unique(all_ITNcov$setting))) %>%
left_join(all_param)%>%
mutate(decay_calc=a*exp( -(time/(L))^k * log(2) )
)%>%
separate(setting, into=c("RCT", "arm"))
all_ITNcov%>%
ggplot()+
geom_point(aes(x=time, y=ITNcov))+
geom_line(data=curve_plot, aes(x=time, y=decay_calc), col="dodgerblue")+
facet_wrap(RCT~arm)+labs(x="Year after distribution", y="LLIN usage")+
theme_bw()+ylim(0,1)+
scale_color_manual(values=c("black", "grey"), name="")+
geom_text(data=all_param, aes(label=paste0("Half-life: ",round(L,1), " years"), group=interaction(RCT, arm), x=1.5, y=0.9),size=4.5)+
geom_text(data=all_param, aes(label=paste0("Initial usage: ",100*round(a,2), " %"), group=interaction(RCT, arm), x=0.6, y=a+0.05),size=4.5)+
theme(legend.position = "bottom",
strip.text.x = element_text(size = 14), axis.title=element_text(size=14),
axis.text=element_text(size=14), strip.background =element_rect(fill="white"), legend.text =element_text(size=14))
ggsave(file.path(plotDir, "all_trials_LLINusage.png"), width=12, height = 12)
rm(list=ls())
library(dplyr)
library(ggplot2)
mainDir="/Users/chamcl/switchdrive/AIM//5. Collaborations/External/Pie & Sarah/EHT_Fitting/"
outputsDir=file.path(mainDir, "csv_outputs")
plotDir=file.path(mainDir, "../Write-up/Revision/plots")
all_ITNcov=data.frame()
optimise_decay_param=function(param, df_ITN_cov){
#if(param[3]<1){
out=data.frame(
time=df_ITN_cov%>% pull(time),
decay_obs=df_ITN_cov  %>% pull(ITNcov)
)%>%
mutate(decay=param[3]*exp( -(time/(param[1]))^param[2] * log(2) ),
diff=(decay-decay_obs)^2)%>%
summarise(diff=sum(diff))
# } else {
#   out=Inf
# }
return(out)
}
calculate_param=function(df_ITN_cov){
opti=optim(c(0.448, 1.11, 0.7), optimise_decay_param, df_ITN_cov=df_ITN_cov , method = "L-BFGS-B", lower=c(0, 0, 0), upper = c(Inf, Inf, 1) )$par
names(opti)=c("L", "k", "a")
opti$setting=unique(df_ITN_cov$setting)
return(opti)
}
calculate_param=function(df_ITN_cov){
opti=optim(c(0.448, 1.11, 0.7), optimise_decay_param, df_ITN_cov=df_ITN_cov , method = "L-BFGS-B", lower=c(0, 0, 0), upper = c(3, Inf, 1) )$par
names(opti)=c("L", "k", "a")
opti$setting=unique(df_ITN_cov$setting)
return(opti)
}
#######################################################
#' Table S1 of Protopopoff et al. 2018 https://www.thelancet.com/journals/lancet/article/PIIS0140-6736(18)30427-6/fulltext
#' Table S2 of Protopopoff et al. 2024 https://malariajournal.biomedcentral.com/articles/10.1186/s12936-023-04727-8#Sec12
#' # proportion of residents declaring using a study net the previous night
ITN_covtrial=data.frame(arm=c(rep("Pyrethroid",6),rep("PBO",6))
,time=rep(c(0.3, 0.75, 1.3, 1.75,2.3, 2.75),2)
,ITNcov=c(1915/2567,2012/2510,1818/2669,1610/2595, 1386/2614, 784/2289,
1997/2559,1820/2335,1571/2687,1445/2647, 1166/2459, 790/2513),
RCT="2018Protopopoff")
all_ITNcov=rbind(all_ITNcov, ITN_covtrial)
########################################################
## Use values not disagggregated by arm, but have similar trends (Supplemental file 2)
## Staedke 2020 page 1298
ITN_covtrial_1 = data.frame(time = c(.5,1,1.5)
,ITNcov = c(.85,.79,.73),
RCT="2020Staedke",
arm="Pyrethroid")
ITN_covtrial=rbind(ITN_covtrial_1, ITN_covtrial_1%>% mutate(arm="PBO"))
all_ITNcov=rbind(all_ITNcov, ITN_covtrial)
######################################################################################
#' Mosha 2022 https://www.thelancet.com/journals/lancet/article/PIIS0140-6736(21)02499-5/fulltext#sec1
#' Abtract, Findings
#' Mosha 2022 https://www.thelancet.com/journals/lancet/article/PIIS0140-6736(21)02499-5/fulltext#sec1
#' Appendix page 4, explicit dates in main paper page 1230
#' "Proportion of participants reporting using a net the night before"
ITN_covtrial_1=data.frame(arm=rep(c("Pyrethroid","IG2","PBO"),each=4),
time=rep(c(0.25,1,1.5,2),3),
ITNcov=c(868/1130,2848/4627,2606/4991,2488/5029,
752/1099,3157/4833,2676/5194,2585/5576,
771/1046,2506/4247,1885/4633,1534/5186)
)
# mosha 2024
#' Appendix S2 figure. Raw data not available. Only among selected children
ITN_covtrial_2=data.frame(arm=rep(c("Pyrethroid","IG2","PBO"),each=2),
time=rep(c(2.5,3),2),
ITNcov=c(0.33,0.25,
0.29,0.21,
0.16,0.09)
)
rm(list=ls())
library(dplyr)
library(ggplot2)
mainDir="/Users/chamcl/switchdrive/AIM//5. Collaborations/External/Pie & Sarah/EHT_Fitting/"
outputsDir=file.path(mainDir, "csv_outputs")
plotDir=file.path(mainDir, "../Write-up/Revision/plots")
all_ITNcov=data.frame()
optimise_decay_param=function(param, df_ITN_cov){
#if(param[3]<1){
out=data.frame(
time=df_ITN_cov%>% pull(time),
decay_obs=df_ITN_cov  %>% pull(ITNcov)
)%>%
mutate(decay=param[3]*exp( -(time/(param[1]))^param[2] * log(2) ),
diff=(decay-decay_obs)^2)%>%
summarise(diff=sum(diff))
# } else {
#   out=Inf
# }
return(out)
}
calculate_param=function(df_ITN_cov){
opti=optim(c(0.448, 1.11, 0.7), optimise_decay_param, df_ITN_cov=df_ITN_cov , method = "L-BFGS-B", lower=c(0, 0, 0), upper = c(Inf, Inf, 1) )$par
names(opti)=c("L", "k", "a")
opti$setting=unique(df_ITN_cov$setting)
return(opti)
}
calculate_param=function(df_ITN_cov){
opti=optim(c(0.448, 1.11, 0.7), optimise_decay_param, df_ITN_cov=df_ITN_cov , method = "L-BFGS-B", lower=c(0, 0, 0), upper = c(3, Inf, 1) )$par
names(opti)=c("L", "k", "a")
opti$setting=unique(df_ITN_cov$setting)
return(opti)
}
#######################################################
#' Table S1 of Protopopoff et al. 2018 https://www.thelancet.com/journals/lancet/article/PIIS0140-6736(18)30427-6/fulltext
#' Table S2 of Protopopoff et al. 2024 https://malariajournal.biomedcentral.com/articles/10.1186/s12936-023-04727-8#Sec12
#' # proportion of residents declaring using a study net the previous night
ITN_covtrial=data.frame(arm=c(rep("Pyrethroid",6),rep("PBO",6))
,time=rep(c(0.3, 0.75, 1.3, 1.75,2.3, 2.75),2)
,ITNcov=c(1915/2567,2012/2510,1818/2669,1610/2595, 1386/2614, 784/2289,
1997/2559,1820/2335,1571/2687,1445/2647, 1166/2459, 790/2513),
RCT="2018Protopopoff")
all_ITNcov=rbind(all_ITNcov, ITN_covtrial)
########################################################
## Use values not disagggregated by arm, but have similar trends (Supplemental file 2)
## Staedke 2020 page 1298
ITN_covtrial_1 = data.frame(time = c(.5,1,1.5)
,ITNcov = c(.85,.79,.73),
RCT="2020Staedke",
arm="Pyrethroid")
ITN_covtrial=rbind(ITN_covtrial_1, ITN_covtrial_1%>% mutate(arm="PBO"))
all_ITNcov=rbind(all_ITNcov, ITN_covtrial)
ITN_covtrial_1=data.frame(arm=rep(c("Pyrethroid","IG2","PBO"),each=4),
time=rep(c(0.25,1,1.5,2),3),
ITNcov=c(868/1130,2848/4627,2606/4991,2488/5029,
752/1099,3157/4833,2676/5194,2585/5576,
771/1046,2506/4247,1885/4633,1534/5186)
)
# mosha 2024
#' Appendix S2 figure. Raw data not available. Only among selected children
ITN_covtrial_2=data.frame(arm=rep(c("Pyrethroid","IG2","PBO"),each=2),
time=rep(c(2.5,3),3),
ITNcov=c(0.33,0.25,
0.29,0.21,
0.16,0.09)
)
ITN_covtrial=rbind(ITN_covtrial_1, ITN_covtrial_2)%>% mutate(RCT="2022Mosha")
all_ITNcov=rbind(all_ITNcov, ITN_covtrial)
ITN_covtrial=data.frame(arm=rep(c("Pyrethroid","IG2"),each=6),
time=rep(c(0.5,0.75, 1.5, 2, 2.5, 3),2),
ITNcov=c(2127/3461,1867/2422,2023/3182,1430/2307, 2031/3329, 1400/2430,
2287/3392,1935/2345,1951/2993,1440/2102, 1837/3204, 1278/2450),
RCT="2023Accrombessi"
) %>% filter(time!=0.5)
all_ITNcov=rbind(all_ITNcov, ITN_covtrial)
#########################################################################
#########################################################################
all_ITNcov$setting=paste0(all_ITNcov$RCT,"_" ,all_ITNcov$arm)
all_param=data.frame()
for(i in unique(all_ITNcov$setting)){
print(i)
all_param=rbind(all_param, calculate_param( df_ITN_cov =all_ITNcov %>% filter(setting==i)))
}
all_param=all_param%>%
mutate(setting2=setting)%>%
separate(setting2, into=c("RCT", "arm"))
write.csv(all_param, file.path(plotDir, "ITN_usage_fit.csv"), row.names = F)
##############
# Visualisation
curve_plot=expand.grid(list(time=seq(0, 3, 0.1),setting= unique(all_ITNcov$setting))) %>%
left_join(all_param)%>%
mutate(decay_calc=a*exp( -(time/(L))^k * log(2) )
)%>%
separate(setting, into=c("RCT", "arm"))
all_ITNcov%>%
ggplot()+
geom_point(aes(x=time, y=ITNcov))+
geom_line(data=curve_plot, aes(x=time, y=decay_calc), col="dodgerblue")+
facet_wrap(RCT~arm)+labs(x="Year after distribution", y="LLIN usage")+
theme_bw()+ylim(0,1)+
scale_color_manual(values=c("black", "grey"), name="")+
geom_text(data=all_param, aes(label=paste0("Half-life: ",round(L,1), " years"), group=interaction(RCT, arm), x=1.5, y=0.9),size=4.5)+
geom_text(data=all_param, aes(label=paste0("Initial usage: ",100*round(a,2), " %"), group=interaction(RCT, arm), x=0.6, y=a+0.05),size=4.5)+
theme(legend.position = "bottom",
strip.text.x = element_text(size = 14), axis.title=element_text(size=14),
axis.text=element_text(size=14), strip.background =element_rect(fill="white"), legend.text =element_text(size=14))
ggsave(file.path(plotDir, "all_trials_LLINusage.png"), width=12, height = 12)
all_ITNcov%>%
ggplot()+
geom_point(aes(x=time, y=ITNcov))+
geom_line(data=curve_plot, aes(x=time, y=decay_calc), col="dodgerblue")+
facet_wrap(RCT~arm)+labs(x="Year after distribution", y="LLIN usage")+
theme_bw()+ylim(0,1)+
scale_color_manual(values=c("black", "grey"), name="")+
geom_text(data=all_param, aes(label=paste0("Half-life: ",round(L,1), " years"), group=interaction(RCT, arm), x=1.5, y=0.9),size=4.5)+
geom_text(data=all_param, aes(label=paste0("Initial usage: ",100*round(a,2), " %"), group=interaction(RCT, arm), x=0.6, y=0.5),size=4.5)+
theme(legend.position = "bottom",
strip.text.x = element_text(size = 14), axis.title=element_text(size=14),
axis.text=element_text(size=14), strip.background =element_rect(fill="white"), legend.text =element_text(size=14))
ggsave(file.path(plotDir, "all_trials_LLINusage.png"), width=12, height = 12)
shiny::runApp('git_repositories/ig2/GITHUB/ITNcascadesdashboard')
runApp('git_repositories/ig2/GITHUB/ITNcascadesdashboard')
runApp('git_repositories/ig2/GITHUB/ITNcascadesdashboard')
sideBar_InputsCascade=sidebar(
title="Parameters",
p("For definitions and assumptions on parameter values please see Assumptions tab"),
accordion(
open = FALSE,
accordion_panel(
title = "Interceptor G2",
actionButton( inputId = "update_ig2",label = "Update plot"
),
numericInput( inputId="usage_ig2",  label="Bednet use",  value=0.69,  min = 0,  max = 1,
step = 0.05,
width = NULL
),
selectInput( inputId="species_ig2",  label="Anopheles species",
choices = AnophelesModel::list_all_species(),
#choices = c("Anopheles gambiae", "Anopheles funestus", "Anopheles arabiensis"),#AnophelesModel::list_all_species(),
selected = "Anopheles gambiae"),
selectInput( inputId="rhythms_hu_ig2",  label="Human activity patterns",
choices = c("Cote D'Ivoire", "Haiti", "Kenya",
"Mozambique",  "Tanzania","Zambia"), selected = "Tanzania"),
selectInput( inputId="rhythms_mosq_ig2",  label="Mosquito activity patterns",
choices = c("Benin", "Burkina Faso","Cameroon", "Democratic Republic of Congo", "Equatorial Guinea",
"Erithrea", "Gabon", "Ghana", "Haiti", "India", "Kenya",
"Mozambique", "Nigeria", "PNG", "Sao Tome", "Senegal",
"Tanzania", "Thailand", "The Gambia", "Uganda","Zambia", "Zimbabwe"), selected = "Tanzania"),
selectInput("EHT_ig2", label = "EHT",
choices = c("Kibondo et al.", "Assenga et al., Tanzania","Assenga et al., Côte d'Ivoire", "BIT080",
"Martin et al., An. gambiae", "Martin et al. An. funestus",
"Sovegnon et al.", "Nguessan et al." ), selected = "Martin et al., An. gambiae"),
numericInput( inputId="attrition_ig2",  label="Attrition  (half life, in years)",  value=2.4,  min = 0,  max = 5,
step = 0.1,
width = NULL
),
numericInput( inputId="attrition_shape_ig2",  label="Attrition  (shape)",  value=2.4,  min = 0,  max = 5,
step = 0.1,
width = NULL
),
actionButton("reset_default_ig2", "Default values IG2"),
actionButton("set_IG2_as_pbo", "Same values as Olyset Plus")
),
accordion_panel(
title = "OlysetPlus",
actionButton( inputId = "update_pbo",label = "Update plot"
),
numericInput( inputId="usage_pbo",  label="Bednet use",  value=0.75,  min = 0,  max = 1,
step = 0.05,
width = NULL
),
selectInput( inputId="species_pbo",  label="Anopheles species",
choices = AnophelesModel::list_all_species(),
selected = "Anopheles gambiae"),
selectInput( inputId="rhythms_hu_pbo",  label="Human activity patterns",
choices = c("Cote D'Ivoire", "Haiti", "Kenya",
"Mozambique",  "Tanzania","Zambia"), selected = "Tanzania"),
selectInput( inputId="rhythms_mosq_pbo",  label="Mosquito activity patterns",
choices = c("Benin", "Burkina Faso","Cameroon", "Democratic Republic of Congo", "Equatorial Guinea",
"Erithrea", "Gabon", "Ghana", "Haiti", "India", "Kenya",
"Mozambique", "Nigeria", "PNG", "Sao Tome", "Senegal",
"Tanzania", "Thailand", "The Gambia", "Uganda","Zambia", "Zimbabwe"), selected = "Tanzania"),
selectInput("EHT_pbo", label = "EHT",
choices = c( "Assenga et al., Tanzania","Assenga et al., Côte d'Ivoire", "BIT055", "Odufuwa et al.",
"Martin et al., An. gambiae", "Martin et al. An. funestus"), selected = "Martin et al., An. gambiae"),
numericInput( inputId="attrition_pbo",  label="Attrition (half life, in years)",  value=1.7,  min = 0,  max = 5,
step = 0.1,
width = NULL
),
numericInput( inputId="attrition_shape_pbo",  label="Attrition (shape)",  value=1.9,  min = 0,  max = 5,
step = 0.1,
width = NULL
),
actionButton("reset_default_pbo", "Default values Olyset Plus"),
actionButton("set_pbo_as_IG2", "Same values as IG2")
),
),
p(""),
)
runApp('git_repositories/ig2/GITHUB/ITNcascadesdashboard')
runApp('git_repositories/ig2/GITHUB/ITNcascadesdashboard')
runApp('git_repositories/ig2/GITHUB/ITNcascadesdashboard')
runApp('git_repositories/ig2/GITHUB/ITNcascadesdashboard')
library(cowplot)
runApp('git_repositories/ig2/GITHUB/ITNcascadesdashboard')
runApp('git_repositories/ig2/GITHUB/ITNcascadesdashboard')
runApp('git_repositories/ig2/GITHUB/ITNcascadesdashboard')
eht=read.csv("/Users/chamcl/Desktop/Book1.csv")
View(eht)
eht=read.csv("/Users/chamcl/Desktop/Book1.csv")
View(eht)
eht=read.csv("/Users/chamcl/Desktop/Book1.csv")
View(eht)
gt(eht)
library(gtable)
gt(eht)
library(gt)
gt(eht)
gt(eht[,-1])
names(eht)=gsub(".", " ", names(eht))
gt(eht[,-1])
names(eht)
eht=read.csv("/Users/chamcl/Desktop/Book1.csv")
library(gt)
names(eht)
names(eht)=gsub("/.", " ", names(eht))
names(eht)
names(eht)
eht=read.csv("/Users/chamcl/Desktop/Book1.csv")
names(eht)=c("Experimental hut trial", "Location","Year","Mosquito species", "New generation ITNs", "Durability" )
gt(eht[,-1])
names(eht)=c("X","Experimental hut trial", "Location","Year","Mosquito species", "New generation ITNs", "Durability" )
gt(eht[,-1])
gt(eht[,-1])%>% gt::md()
gt(eht[,-1])%>% %>%
gt(eht[,-1])%>%
cols_label(
product = md("**Oatmeal Product**")
)
gt(eht[,-1])
plot_grid()
eht
getwd()
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
#setwd(dirname(rstudioapi::getSourceEditorContext()$path))
dirInputs="Inputs"
dirInputs
write.csv(eht[,-1], "Inputs/EHT_description.csv", row.names = F)
eht_description<- read.csv(file.path(dirInputs,"EHT_description.csv"))
get(eht_description)
gt(eht_description)
eht_description
names(eht)=c("Experimental hut trial", "Location","Year","Mosquito species", "New generation ITNs", "Durability" )
gt(eht_description)
names(eht_description)=c("Experimental hut trial", "Location","Year","Mosquito species", "New generation ITNs", "Durability" )
gt(eht_description)
runApp()
runApp()
runApp()
runApp()
runApp()
